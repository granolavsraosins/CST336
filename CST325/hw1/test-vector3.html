<html>
<head>
<script src="/CST325/hw1/vector3.js"></script>
<script src="/CST325/hw1/test.js"></script>
<script>

var reporter = new TestReporter();

//-----------------------------------------------------------------------------
function testVector3() {
    testInitialization();
    testDefaultValues();
    testSet();
    testCopy();
    testAdd();
    testSubtract();
    testNegate();
    testMultiplyScalar();
    testLength();
    testLengthSquared();
    testNormalized();
    testNormalize();
    testDotProduct();
    testCrossProduct();

    reporter.reportFinalResults();
}

//------------------------------------------------------------------------------- 
function testInitialization() {
    reporter.reportTestStart("initialization");

    try {
        var v1 = new Vector3(1, 2, 3);
        assert(vectorEqual(v1, 1, 2, 3), "initialization");
        reporter.reportTestEnd(true);
    } catch (err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testDefaultValues() {
    reporter.reportTestStart("default values");

    try {
        var v2 = new Vector3();
        assert(vectorEqual(v2, 0, 0, 0), "default values");
        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testSet() {
    reporter.reportTestStart("set");

    try {
        var v3 = new Vector3().set(1, 2, 3);
        assert(vectorEqual(v3, 1, 2, 3), "set");

        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testCopy() {
    reporter.reportTestStart("copy");

    try {
        var v4 = new Vector3();
        var v5 = new Vector3(3, 2, 1);
        self = v4.copy(v5);
        assert(vectorEqual(v4, 3, 2, 1), "copy");
        assert(v4 == self, "copy (return value)");

        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testAdd() {
    reporter.reportTestStart("add");

    try {
        var v6 = new Vector3(1, 1, 1);
        var v7 = new Vector3(3, 2, 1);
        self = v6.add(v7);
        assert(vectorEqual(v6, 4, 3, 2), "add");
        assert(vectorEqual(v7, 3, 2, 1), "add");
        assert(v6 == self, "add (return value)");
        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testSubtract() {
    reporter.reportTestStart("subtract");

    try {
        var v8 = new Vector3(1, 1, 1);
        var v9 = new Vector3(3, 2, 1);
        self = v8.subtract(v9);
        assert(vectorEqual(v8, -2, -1, 0), "subtract");
        assert(vectorEqual(v9, 3, 2, 1), "subtract");
        assert(self == v8, "subtract (return value)");

        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testNegate() {
    reporter.reportTestStart("negate");

    try {
        var v10 = new Vector3(2, 4, 6).negate();
        assert(vectorEqual(v10, -2, -4, -6), "negate");
        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testMultiplyScalar() {
    reporter.reportTestStart("multiplyScalar");

    try {
        var v11 = new Vector3(2, 4, 6).multiplyScalar(2);
        assert(vectorEqual(v11, 4, 8, 12), "multiplyScalar");
        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testLength() {
    reporter.reportTestStart("length");

    try {
        var length = new Vector3(3, 0, 4).length();
        assert(floatEqual(length, 5), "length");
        length = new Vector3(0, 3, 4).length();
        assert(floatEqual(length, 5), "length");

        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testLengthSquared() {
    reporter.reportTestStart("length squared");

    try {
        length = new Vector3(3, 0, 4).lengthSqr();
        assert(floatEqual(length, 25), "lengthSqr");
        length = new Vector3(0, 3, 4).lengthSqr();
        assert(floatEqual(length, 25), "lengthSqr");

        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testNormalized() {
    reporter.reportTestStart("normalized");

    try {
        // Note - try deleting some of the ending digits of these long decimal numbers to
        // see if they still compare as equal

        var v12 = new Vector3(1.234, 98.76, 425.4);
        var v13 = v12.normalized();
        assert(vectorEqual(v13, 0.002825639739273576, 0.2261427720021543, 0.9740900689521712), "normalized (not normalize)");
        assert(v12 != v13, "normalized (return value)");

        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testNormalize() {
    reporter.reportTestStart("normalize");

    try {
        var v14 = new Vector3(1.234, 98.76, 425.4).normalize();
        assert(vectorEqual(v14, 0.002825639739273576, 0.2261427720021543, 0.9740900689521712), "normalize (not normalized)");
        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testDotProduct() {
    reporter.reportTestStart("dot product");

    try {
        var root2Over2 = Math.sqrt(2) / 2; // 0.707 rad or 45 degrees
        var v15 = new Vector3(root2Over2, root2Over2, 0); // precise enough to pass floatEqual
        var dot = v15.dot(v15);
        assert(floatEqual(dot, 1), "dot");

        var v16 = new Vector3(root2Over2, 0, root2Over2); // precise enough to pass floatEqual
        dot = v16.dot(v16);
        assert(floatEqual(dot, 1), "dot");

        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}

//------------------------------------------------------------------------------- 
function testCrossProduct() {
    reporter.reportTestStart("cross product");

    try {
        var v17 = new Vector3(1, 0, 0);
        var v18 = new Vector3(0, 1, 0);
        var cross = v17.cross(v18);
        assert(vectorEqual(cross, 0, 0, 1));
        reporter.reportTestEnd(true);
    } catch(err) {
        reporter.reportTestEnd(false);
    }
}
</script>

</head>

<body onload="testVector3()">
</body>

</html>